{"ast":null,"code":"var _jsxFileName = \"/Users/nishimuratomohiro/Capstone2/capstone2/menyu/src/components/Layout/EditMenu.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect, useState } from 'react/cjs/react.development';\nimport Storage from '@aws-amplify/storage';\nimport API from '@aws-amplify/api';\nimport { graphqlOperation } from '@aws-amplify/api-graphql';\nimport { createCategory } from '../../graphql/mutations';\nimport { createItem } from '../../graphql/mutations';\nimport { deleteItem } from '../../graphql/mutations';\nimport { updateItem } from '../../graphql/mutations';\nimport classes from './EditMenu.module.css';\nimport { v4 as uuid } from 'uuid';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditMenu = props => {\n  _s();\n\n  // props = [bucket, region, restaurant, restaurantSetter]\n  //const [items, setItems] = useState(null);\n  const [categoryAdderOpened, setCategoryAdderOpened] = useState(false);\n  const [categoryName, setCategoryName] = useState('');\n  const [itemAdderOpened, setItemAdderOpened] = useState(false);\n  const [itemName, setItemName] = useState('');\n  const [itemDescription, setItemDescription] = useState('');\n  const [itemIngredients, setItemIngredients] = useState('');\n  const [itemPrice, setItemPrice] = useState('');\n  const [itemImage, setItemImage] = useState(null);\n  const [itemSpecialities, setItemSpecilities] = useState({\n    vege: false,\n    vegan: false,\n    halal: false,\n    featured: false,\n    hidden: false\n  });\n  const [currentCategory, setCurrentCategory] = useState(null);\n  const [deleteModalOpened, setDeleteModalOpened] = useState(false);\n  const [itemToBeDeleted, setItemToBeDeleted] = useState(null);\n  const [itemEditorOpened, setItemEditorOpened] = useState(false);\n  const [itemToBeEditted, setItemToBeEditted] = useState(null);\n  const [loadingMessage, setLoadingMessage] = useState(null);\n  const [qrCodeViewerOpened, setQRCodeViewerOpened] = useState(false);\n  const qrCodeURLBase = 'https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=';\n  console.log('rendering EditMenu');\n\n  const AddCategoryHandler = () => {\n    setCategoryAdderOpened(true);\n  };\n\n  const onAddCategoryConfirm = async () => {\n    console.log('from onAddCategoryConfirm');\n\n    if (categoryName === '') {\n      return;\n    }\n\n    const inputData = {\n      restaurantID: props.restaurant.id,\n      name: categoryName\n    };\n\n    try {\n      const newCategoryData = await API.graphql(graphqlOperation(createCategory, {\n        input: inputData\n      }));\n      const newCategory = newCategoryData.data.createCategory;\n      let newCategories = props.restaurant.categories.items;\n\n      if (newCategories) {\n        console.log('current category', newCategories);\n        console.log('categories with items');\n        newCategories.push(newCategory);\n        console.log('updated category', newCategories);\n      } else {\n        console.log('categories empty');\n        newCategories = [newCategory];\n      }\n\n      props.restaurantSetter(prevRestaurant => {\n        let newRestaurant = prevRestaurant;\n        newRestaurant.categories.items = newCategories;\n        return newRestaurant;\n      });\n      console.log('from onAddCategoryConfirm success');\n    } catch (err) {\n      console.log('error creating category:', err);\n    }\n\n    setCategoryAdderOpened(false);\n  };\n\n  const onAddCategoryCancel = () => {\n    setCategoryAdderOpened(false);\n  };\n\n  const AddMenuHandler = () => {\n    setItemAdderOpened(true);\n  };\n\n  const onAddItemConfirm = async () => {\n    console.log('onAddItemConfirm');\n\n    if (itemName === '' || !itemImage || itemPrice === '') {\n      return;\n    }\n\n    const extension = itemImage.name.split(\".\")[1];\n    const {\n      type: mimeType\n    } = itemImage;\n    const key = `${uuid()}${itemName}.${extension}`;\n    const url = `https://${props.bucket}.s3.${props.region}.amazonaws.com/public/${key}`;\n    const inputData = {\n      categoryID: currentCategory.id,\n      name: itemName,\n      description: itemDescription,\n      ingredients: itemIngredients,\n      price: itemPrice,\n      image: url,\n      vegan: itemSpecialities.vegan,\n      vege: itemSpecialities.vege,\n      halal: itemSpecialities.halal,\n      featured: itemSpecialities.featured,\n      hidden: itemSpecialities.hidden\n    };\n\n    try {\n      // s3 update\n      await Storage.put(key, itemImage, {\n        contentType: mimeType\n      }); // api update\n\n      const newItemData = await API.graphql(graphqlOperation(createItem, {\n        input: inputData\n      }));\n      console.log('from onAddItemConfirm: newItemData : ', newItemData);\n      const newItem = newItemData.data.createItem;\n      props.restaurantSetter(prevRestaurant => {\n        const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id === currentCategory.id);\n        let updatedCategory = prevRestaurant.categories.items[categoryIndex];\n\n        if (!updatedCategory.items) {\n          updatedCategory = { ...updatedCategory,\n            items: {\n              items: []\n            }\n          };\n        }\n\n        prevRestaurant.categories.items[categoryIndex] = updatedCategory;\n        prevRestaurant.categories.items[categoryIndex].items.items.push(newItem);\n        return prevRestaurant;\n      });\n    } catch (err) {\n      console.log('error creating items:', err);\n    }\n\n    setItemAdderOpened(false);\n    setItemName('');\n    setItemDescription('');\n    setItemIngredients('');\n    setItemImage(null);\n    setItemSpecilities({\n      vege: false,\n      vegan: false,\n      halal: false,\n      featured: false,\n      hidden: false\n    });\n    setCategoryAdderOpened(false);\n  };\n\n  const onAddItemCancel = () => {\n    setItemAdderOpened(false);\n    setItemName('');\n    setItemDescription('');\n    setItemIngredients('');\n    setItemImage(null);\n    setItemSpecilities({\n      vege: false,\n      vegan: false,\n      halal: false,\n      featured: false,\n      hidden: false\n    });\n  };\n\n  const onDeleteButtonClicked = item => {\n    setDeleteModalOpened(true);\n    setItemToBeDeleted(item);\n  };\n\n  const onDeleteItemCanceled = () => {\n    setDeleteModalOpened(false);\n    setItemToBeDeleted(null);\n  };\n\n  const onDeleteItemConfirmed = async () => {\n    try {\n      //s3 update\n      const deletedKey = itemToBeDeleted.image.replace(`https://${props.bucket}.s3.${props.region}.amazonaws.com/public/`, '');\n      await Storage.remove(deletedKey); //api update\n\n      const inputData = {\n        id: itemToBeDeleted.id\n      };\n      await API.graphql(graphqlOperation(deleteItem, {\n        input: inputData\n      })); //restaurant update\n\n      await props.restaurantSetter(prevRestaurant => {\n        const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id == itemToBeDeleted.categoryID);\n        const itemIndex = prevRestaurant.categories.items[categoryIndex].items.items.findIndex(obj => obj.id === itemToBeDeleted.id);\n        console.log('deleting item index:', itemIndex);\n        prevRestaurant.categories.items[categoryIndex].items.items.splice(itemIndex, 1);\n        return prevRestaurant;\n      });\n      console.log('from onItemDeleted', props.restaurant);\n    } catch (err) {\n      console.log('error deleting item', err);\n    }\n\n    setDeleteModalOpened(false);\n    setItemToBeDeleted(null);\n  };\n\n  const onEditItemButtonClicked = item => {\n    setItemEditorOpened(true);\n    setItemToBeEditted(item);\n  };\n\n  const onEditItemCanceled = () => {\n    setItemEditorOpened(false);\n    setItemToBeEditted(null);\n  };\n\n  const onEditItemConfirmed = async () => {\n    console.log('onEditItemConfirmed start');\n\n    try {\n      //s3 update\n      let url = itemToBeEditted.image;\n      console.log('onEditItemConfirmed 1');\n\n      if (itemImage) {\n        //1. s3 delete\n        console.log('onEditItemConfirmed 2');\n        const deletedKey = itemToBeEditted.image.replace(`https://${props.bucket}.s3.${props.region}.amazonaws.com/public/`, '');\n        await Storage.remove(deletedKey); //2. s3 upload\n\n        console.log('onEditItemConfirmed 3');\n        const extension = itemImage.name.split(\".\")[1];\n        const {\n          type: mimeType\n        } = itemImage;\n        const key = `${uuid()}${itemToBeEditted.name}.${extension}`;\n        url = `https://${props.bucket}.s3.${props.region}.amazonaws.com/public/${key}`;\n        await Storage.put(key, itemImage, {\n          contentType: mimeType\n        });\n      }\n\n      console.log('onEditItemConfirmed 4'); //api update\n\n      const inputData = {\n        id: itemToBeEditted.id,\n        name: itemToBeEditted.name,\n        description: itemToBeEditted.description,\n        ingredients: itemToBeEditted.ingredients,\n        price: itemToBeEditted.price,\n        image: url,\n        vegan: itemToBeEditted.vegan,\n        vege: itemToBeEditted.vege,\n        halal: itemToBeEditted.halal,\n        featured: itemToBeEditted.featured,\n        hidden: itemToBeEditted.hidden\n      };\n      const updatedItemData = await API.graphql(graphqlOperation(updateItem, {\n        input: inputData\n      }));\n      const updatedItem = updatedItemData.data.updateItem;\n      console.log('onEditItemConfirmed 5'); //restaurant update\n\n      props.restaurantSetter(prevRestaurant => {\n        const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id == itemToBeEditted.categoryID);\n        const itemIndex = prevRestaurant.categories.items[categoryIndex].items.items.findIndex(obj => obj.id === itemToBeEditted.id);\n        console.log('deleting item index:', itemIndex);\n        prevRestaurant.categories.items[categoryIndex].items.items[itemIndex] = updatedItem;\n        return prevRestaurant;\n      });\n      console.log('onEditItemConfirmed 5');\n    } catch (err) {\n      console.log('error onEditItemConfirmed:', err);\n    }\n\n    setItemEditorOpened(false);\n    setItemToBeEditted(null);\n  };\n\n  const onHideButtonClicked = async item => {\n    console.log('from onHideButtonClicked: ', item);\n    setLoadingMessage('hiding from Menu...');\n    await changeItemVisibility(item, true);\n  };\n\n  const onRevealButtonClicked = async item => {\n    console.log('from onRevealButtonClicked: ', item);\n    setLoadingMessage('revealing to Menu ...');\n    await changeItemVisibility(item, false);\n  };\n\n  const changeItemVisibility = async (item, hidden) => {\n    try {\n      const inputData = {\n        id: item.id,\n        hidden: hidden\n      };\n      const updatedItemData = await API.graphql(graphqlOperation(updateItem, {\n        input: inputData\n      }));\n      const updatedItem = updatedItemData.data.updateItem; //restaurant update\n\n      props.restaurantSetter(prevRestaurant => {\n        const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id == item.categoryID);\n        const itemIndex = prevRestaurant.categories.items[categoryIndex].items.items.findIndex(obj => obj.id === item.id);\n        prevRestaurant.categories.items[categoryIndex].items.items[itemIndex] = updatedItem;\n        return prevRestaurant;\n      });\n    } catch (err) {\n      console.log('error toggling hidden: ', err);\n    }\n\n    setLoadingMessage(null);\n  };\n\n  const onQRCodeRequested = () => {\n    setQRCodeViewerOpened(true);\n  };\n\n  const onQRCodeClosed = () => {\n    setQRCodeViewerOpened(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.editMenu,\n    children: [loadingMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.backdrop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.loading,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: loadingMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 17\n    }, this), qrCodeViewerOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.backdrop,\n        onClick: onQRCodeClosed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.qrCodeContainer,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: qrCodeURLBase + 'new-feature.d1ac5hakempkoy.amplifyapp.com' + props.restaurant.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.content,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.mainText,\n        children: \"Your Menu\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.editArea,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.categoryArea,\n          children: [categoryAdderOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.backdrop,\n              onClick: onAddCategoryCancel\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.editorContainer,\n              children: [\"Category Name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                onChange: e => {\n                  setCategoryName(e.target.value);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 52\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: onAddCategoryConfirm,\n                children: \"Confirm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: onAddCategoryCancel,\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.Ctext,\n            children: \"Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.Citems,\n            children: props.restaurant.categories.items && (props.restaurant.categories.items.length > 0 ? props.restaurant.categories.items.map((category, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.eachItem,\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: classes.button,\n                onClick: () => setCurrentCategory({\n                  id: category.id,\n                  name: category.name\n                }),\n                children: category.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 45\n              }, this)\n            }, category.id ? category.id : index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 41\n            }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Add Your Restaurant Menu Category!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 351,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.buttonSection,\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: classes.Cbutton,\n              onClick: AddCategoryHandler,\n              children: \"+ Add\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this), deleteModalOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.backdrop,\n            onClick: onDeleteItemCanceled\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.deleteModalContainer,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"You Sure?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onDeleteItemConfirmed,\n              children: \"Confirm\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onDeleteItemCanceled,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 25\n        }, this), itemEditorOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.backdrop,\n            onClick: onEditItemCanceled\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.editorContainer,\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Edit an Item\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: itemToBeEditted.name,\n                onChange: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      name: e.target.value\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 375,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Description: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: itemToBeEditted.description,\n                onChange: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      description: e.target.value\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Ingredients: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: itemToBeEditted.ingredients,\n                onChange: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      ingredients: e.target.value\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 51\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Price: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: itemToBeEditted.price,\n                onChange: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      price: e.target.value\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [\"Image: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                onChange: e => {\n                  setItemImage(e.target.files[0]);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 45\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"vege\",\n                checked: itemToBeEditted.vege,\n                onClick: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      vege: e.target.checked\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"vege\",\n                children: \"vegetarian\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"vegan\",\n                checked: itemToBeEditted.vegan,\n                onClick: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      vegan: e.target.checked\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"vegan\",\n                children: \"vegan\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"halal\",\n                checked: itemToBeEditted.halal,\n                onClick: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      halal: e.target.checked\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"halal\",\n                children: \"halal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: \"featured\",\n                checked: itemToBeEditted.featured,\n                onClick: e => {\n                  setItemToBeEditted(prev => {\n                    return { ...prev,\n                      featured: e.target.checked\n                    };\n                  });\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"featured\",\n                children: \"featured\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onEditItemConfirmed,\n              children: \"Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: onEditItemCanceled,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          size: \"1\",\n          color: \"#6B2200\",\n          className: classes.line\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.currentCategoryArea,\n          children: currentCategory ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classes.itemContent,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.Itext,\n                children: \" Items\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.itemArea,\n                children: props.restaurant.categories.items.filter(category => {\n                  return category.id === currentCategory.id;\n                }).map((category, index) => {\n                  return category.items.items.map((item, index) => {\n                    if (!item.hidden) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: classes.eachItem,\n                        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                          src: item.image\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 426,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: item.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 427,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => onDeleteButtonClicked(item),\n                          children: \"delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 428,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => onEditItemButtonClicked(item),\n                          children: \"edit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 429,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: async () => await onHideButtonClicked(item),\n                          children: \"hide from menu\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 430,\n                          columnNumber: 65\n                        }, this)]\n                      }, item.id ? item.id : index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 425,\n                        columnNumber: 61\n                      }, this);\n                    }\n                  });\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: props.restaurant.categories.items.filter(category => {\n                  return category.id === currentCategory.id;\n                }).map((category, index) => {\n                  return category.items.items.map((item, index) => {\n                    if (item.hidden) {\n                      return /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                          src: item.image\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 447,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: item.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 448,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => onDeleteButtonClicked(item),\n                          children: \"delete\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 449,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: () => onEditItemButtonClicked(item),\n                          children: \"edit\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 450,\n                          columnNumber: 65\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          onClick: async () => await onRevealButtonClicked(item),\n                          children: \"reveal to menu\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 451,\n                          columnNumber: 65\n                        }, this)]\n                      }, item.id ? item.id : index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 446,\n                        columnNumber: 61\n                      }, this);\n                    }\n                  });\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 37\n              }, this), itemAdderOpened && /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.backdrop,\n                  onClick: onAddItemCancel\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 461,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.editorContainer,\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \" Add a new Item \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [\"Name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      onChange: e => {\n                        setItemName(e.target.value);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 464,\n                      columnNumber: 60\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 464,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [\"Description: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      onChange: e => {\n                        setItemDescription(e.target.value);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 465,\n                      columnNumber: 67\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 465,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [\"Ingredients: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      onChange: e => {\n                        setItemIngredients(e.target.value);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 466,\n                      columnNumber: 67\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 466,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [\"price: $\", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"text\",\n                      onChange: e => {\n                        setItemPrice(e.target.value);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 467,\n                      columnNumber: 62\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 467,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [\"Image: \", /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      onChange: e => {\n                        setItemImage(e.target.files[0]);\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 468,\n                      columnNumber: 61\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 468,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"vege\",\n                      onClick: e => {\n                        setItemSpecilities(prev => {\n                          return { ...prev,\n                            vege: e.target.checked\n                          };\n                        });\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 470,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"vege\",\n                      children: \"vegetarian\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 473,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 469,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"vegan\",\n                      onClick: e => {\n                        setItemSpecilities(prev => {\n                          return { ...prev,\n                            vegan: e.target.checked\n                          };\n                        });\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 476,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"vegan\",\n                      children: \"vegan\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 479,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"halal\",\n                      onClick: e => {\n                        setItemSpecilities(prev => {\n                          return { ...prev,\n                            halal: e.target.checked\n                          };\n                        });\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 482,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"halal\",\n                      children: \"halal\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 485,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 481,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"checkbox\",\n                      id: \"featured\",\n                      onClick: e => {\n                        setItemSpecilities(prev => {\n                          return { ...prev,\n                            featured: e.target.checked\n                          };\n                        });\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 488,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                      for: \"featured\",\n                      children: \"featured\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 491,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: onAddItemConfirm,\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 493,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: onAddItemCancel,\n                    children: \"Cancel\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 494,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: AddMenuHandler,\n                children: \"+ Add\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"choose category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 299,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditMenu, \"6LLUIRy5oa7R1ZmnhTUlVQGVMHw=\");\n\n_c = EditMenu;\nexport default EditMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditMenu\");","map":{"version":3,"sources":["/Users/nishimuratomohiro/Capstone2/capstone2/menyu/src/components/Layout/EditMenu.js"],"names":["React","useEffect","useState","Storage","API","graphqlOperation","createCategory","createItem","deleteItem","updateItem","classes","v4","uuid","EditMenu","props","categoryAdderOpened","setCategoryAdderOpened","categoryName","setCategoryName","itemAdderOpened","setItemAdderOpened","itemName","setItemName","itemDescription","setItemDescription","itemIngredients","setItemIngredients","itemPrice","setItemPrice","itemImage","setItemImage","itemSpecialities","setItemSpecilities","vege","vegan","halal","featured","hidden","currentCategory","setCurrentCategory","deleteModalOpened","setDeleteModalOpened","itemToBeDeleted","setItemToBeDeleted","itemEditorOpened","setItemEditorOpened","itemToBeEditted","setItemToBeEditted","loadingMessage","setLoadingMessage","qrCodeViewerOpened","setQRCodeViewerOpened","qrCodeURLBase","console","log","AddCategoryHandler","onAddCategoryConfirm","inputData","restaurantID","restaurant","id","name","newCategoryData","graphql","input","newCategory","data","newCategories","categories","items","push","restaurantSetter","prevRestaurant","newRestaurant","err","onAddCategoryCancel","AddMenuHandler","onAddItemConfirm","extension","split","type","mimeType","key","url","bucket","region","categoryID","description","ingredients","price","image","put","contentType","newItemData","newItem","categoryIndex","findIndex","obj","updatedCategory","onAddItemCancel","onDeleteButtonClicked","item","onDeleteItemCanceled","onDeleteItemConfirmed","deletedKey","replace","remove","itemIndex","splice","onEditItemButtonClicked","onEditItemCanceled","onEditItemConfirmed","updatedItemData","updatedItem","onHideButtonClicked","changeItemVisibility","onRevealButtonClicked","onQRCodeRequested","onQRCodeClosed","editMenu","backdrop","loading","qrCodeContainer","content","mainText","editArea","categoryArea","editorContainer","e","target","value","Ctext","Citems","length","map","category","index","eachItem","button","buttonSection","Cbutton","deleteModalContainer","prev","files","checked","line","currentCategoryArea","itemContent","Itext","itemArea","filter"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,6BAApC;AAEA,OAAOC,OAAP,MAAoB,sBAApB;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,UAAT,QAA2B,yBAA3B;AACA,SAASC,UAAT,QAA2B,yBAA3B;AAEA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAASC,EAAE,IAAIC,IAAf,QAA2B,MAA3B;;;AAEA,MAAMC,QAAQ,GAAIC,KAAD,IAAW;AAAA;;AACxB;AACA;AAEA,QAAM,CAACC,mBAAD,EAAsBC,sBAAtB,IAAgDd,QAAQ,CAAC,KAAD,CAA9D;AACA,QAAM,CAACe,YAAD,EAAeC,eAAf,IAAkChB,QAAQ,CAAC,EAAD,CAAhD;AAEA,QAAM,CAACiB,eAAD,EAAkBC,kBAAlB,IAAwClB,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACmB,QAAD,EAAWC,WAAX,IAA0BpB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACqB,eAAD,EAAkBC,kBAAlB,IAAwCtB,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACuB,eAAD,EAAkBC,kBAAlB,IAAwCxB,QAAQ,CAAC,EAAD,CAAtD;AACA,QAAM,CAACyB,SAAD,EAAYC,YAAZ,IAA4B1B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC2B,SAAD,EAAYC,YAAZ,IAA4B5B,QAAQ,CAAC,IAAD,CAA1C;AACA,QAAM,CAAC6B,gBAAD,EAAmBC,kBAAnB,IACD9B,QAAQ,CAAC;AAAC+B,IAAAA,IAAI,EAAE,KAAP;AAAcC,IAAAA,KAAK,EAAE,KAArB;AAA4BC,IAAAA,KAAK,EAAE,KAAnC;AAA0CC,IAAAA,QAAQ,EAAE,KAApD;AAA2DC,IAAAA,MAAM,EAAE;AAAnE,GAAD,CADb;AAGA,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCrC,QAAQ,CAAC,IAAD,CAAtD;AAEA,QAAM,CAACsC,iBAAD,EAAoBC,oBAApB,IAA4CvC,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAACwC,eAAD,EAAkBC,kBAAlB,IAAwCzC,QAAQ,CAAC,IAAD,CAAtD;AAEA,QAAM,CAAC0C,gBAAD,EAAmBC,mBAAnB,IAA0C3C,QAAQ,CAAC,KAAD,CAAxD;AACA,QAAM,CAAC4C,eAAD,EAAkBC,kBAAlB,IAAwC7C,QAAQ,CAAC,IAAD,CAAtD;AAEA,QAAM,CAAC8C,cAAD,EAAiBC,iBAAjB,IAAsC/C,QAAQ,CAAC,IAAD,CAApD;AAEA,QAAM,CAACgD,kBAAD,EAAqBC,qBAArB,IAA8CjD,QAAQ,CAAC,KAAD,CAA5D;AAEA,QAAMkD,aAAa,GAAG,gEAAtB;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;;AAEA,QAAMC,kBAAkB,GAAG,MAAM;AAC7BvC,IAAAA,sBAAsB,CAAC,IAAD,CAAtB;AACH,GAFD;;AAIA,QAAMwC,oBAAoB,GAAG,YAAW;AACpCH,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;;AACA,QAAIrC,YAAY,KAAK,EAArB,EAAyB;AACrB;AACH;;AAED,UAAMwC,SAAS,GAAG;AAAEC,MAAAA,YAAY,EAAE5C,KAAK,CAAC6C,UAAN,CAAiBC,EAAjC;AAAqCC,MAAAA,IAAI,EAAE5C;AAA3C,KAAlB;;AACA,QAAI;AACA,YAAM6C,eAAe,GAAG,MAAM1D,GAAG,CAAC2D,OAAJ,CAAY1D,gBAAgB,CAACC,cAAD,EAAiB;AAAE0D,QAAAA,KAAK,EAAEP;AAAT,OAAjB,CAA5B,CAA9B;AACA,YAAMQ,WAAW,GAAGH,eAAe,CAACI,IAAhB,CAAqB5D,cAAzC;AAEA,UAAI6D,aAAa,GAAGrD,KAAK,CAAC6C,UAAN,CAAiBS,UAAjB,CAA4BC,KAAhD;;AACA,UAAIF,aAAJ,EAAmB;AACfd,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCa,aAAhC;AACAd,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAa,QAAAA,aAAa,CAACG,IAAd,CAAmBL,WAAnB;AACAZ,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCa,aAAhC;AACH,OALD,MAKO;AACHd,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACAa,QAAAA,aAAa,GAAG,CAACF,WAAD,CAAhB;AACH;;AAEDnD,MAAAA,KAAK,CAACyD,gBAAN,CAAwBC,cAAD,IAAoB;AACvC,YAAIC,aAAa,GAAGD,cAApB;AACAC,QAAAA,aAAa,CAACL,UAAd,CAAyBC,KAAzB,GAAiCF,aAAjC;AACA,eAAOM,aAAP;AACH,OAJD;AAKApB,MAAAA,OAAO,CAACC,GAAR,CAAY,mCAAZ;AACH,KArBD,CAqBE,OAAOoB,GAAP,EAAY;AACVrB,MAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCoB,GAAxC;AACH;;AAED1D,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACH,GAjCD;;AAmCA,QAAM2D,mBAAmB,GAAG,MAAM;AAC9B3D,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACH,GAFD;;AAIA,QAAM4D,cAAc,GAAG,MAAM;AACzBxD,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH,GAFD;;AAIA,QAAMyD,gBAAgB,GAAG,YAAW;AAChCxB,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;;AACA,QAAIjC,QAAQ,KAAK,EAAb,IAAmB,CAACQ,SAApB,IAAiCF,SAAS,KAAK,EAAnD,EAAuD;AACnD;AACH;;AAED,UAAMmD,SAAS,GAAGjD,SAAS,CAACgC,IAAV,CAAekB,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAlB;AACA,UAAM;AAAEC,MAAAA,IAAI,EAAEC;AAAR,QAAqBpD,SAA3B;AACA,UAAMqD,GAAG,GAAI,GAAEtE,IAAI,EAAG,GAAES,QAAS,IAAGyD,SAAU,EAA9C;AACA,UAAMK,GAAG,GAAI,WAAUrE,KAAK,CAACsE,MAAO,OAAMtE,KAAK,CAACuE,MAAO,yBAAwBH,GAAI,EAAnF;AACA,UAAMzB,SAAS,GAAG;AAAE6B,MAAAA,UAAU,EAAEhD,eAAe,CAACsB,EAA9B;AACEC,MAAAA,IAAI,EAAExC,QADR;AAEEkE,MAAAA,WAAW,EAAEhE,eAFf;AAGEiE,MAAAA,WAAW,EAAE/D,eAHf;AAIEgE,MAAAA,KAAK,EAAE9D,SAJT;AAKE+D,MAAAA,KAAK,EAAEP,GALT;AAMEjD,MAAAA,KAAK,EAAEH,gBAAgB,CAACG,KAN1B;AAOED,MAAAA,IAAI,EAAEF,gBAAgB,CAACE,IAPzB;AAQEE,MAAAA,KAAK,EAAEJ,gBAAgB,CAACI,KAR1B;AASEC,MAAAA,QAAQ,EAAEL,gBAAgB,CAACK,QAT7B;AAUEC,MAAAA,MAAM,EAAEN,gBAAgB,CAACM;AAV3B,KAAlB;;AAaA,QAAI;AACA;AACA,YAAMlC,OAAO,CAACwF,GAAR,CAAYT,GAAZ,EAAiBrD,SAAjB,EAA4B;AAAC+D,QAAAA,WAAW,EAAEX;AAAd,OAA5B,CAAN,CAFA,CAGA;;AACA,YAAMY,WAAW,GAAG,MAAMzF,GAAG,CAAC2D,OAAJ,CAAY1D,gBAAgB,CAACE,UAAD,EAAa;AAAEyD,QAAAA,KAAK,EAAEP;AAAT,OAAb,CAA5B,CAA1B;AACAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,uCAAZ,EAAqDuC,WAArD;AACA,YAAMC,OAAO,GAAGD,WAAW,CAAC3B,IAAZ,CAAiB3D,UAAjC;AAEAO,MAAAA,KAAK,CAACyD,gBAAN,CAAwBC,cAAD,IAAoB;AACvC,cAAMuB,aAAa,GAAGvB,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC2B,SAAhC,CAA2CC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,KAAWtB,eAAe,CAACsB,EAA7E,CAAtB;AACA,YAAIsC,eAAe,GAAG1B,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,CAAtB;;AACA,YAAI,CAAEG,eAAe,CAAC7B,KAAtB,EAA8B;AAC1B6B,UAAAA,eAAe,GAAG,EAAE,GAAGA,eAAL;AAAsB7B,YAAAA,KAAK,EAAE;AAACA,cAAAA,KAAK,EAAE;AAAR;AAA7B,WAAlB;AACH;;AACDG,QAAAA,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,IAAiDG,eAAjD;AACA1B,QAAAA,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2DC,IAA3D,CAAgEwB,OAAhE;AACA,eAAOtB,cAAP;AACH,OATD;AAWH,KAnBD,CAmBE,OAAOE,GAAP,EAAY;AACVrB,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCoB,GAArC;AACH;;AAEDtD,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAE,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAI,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,IAAAA,kBAAkB,CAAC;AAACC,MAAAA,IAAI,EAAE,KAAP;AAAcC,MAAAA,KAAK,EAAE,KAArB;AAA4BC,MAAAA,KAAK,EAAE,KAAnC;AAA0CC,MAAAA,QAAQ,EAAE,KAApD;AAA2DC,MAAAA,MAAM,EAAE;AAAnE,KAAD,CAAlB;AACArB,IAAAA,sBAAsB,CAAC,KAAD,CAAtB;AACH,GArDD;;AAuDA,QAAMmF,eAAe,GAAG,MAAM;AAC1B/E,IAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACAE,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAE,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAE,IAAAA,kBAAkB,CAAC,EAAD,CAAlB;AACAI,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAE,IAAAA,kBAAkB,CAAC;AAACC,MAAAA,IAAI,EAAE,KAAP;AAAcC,MAAAA,KAAK,EAAE,KAArB;AAA4BC,MAAAA,KAAK,EAAE,KAAnC;AAA0CC,MAAAA,QAAQ,EAAE,KAApD;AAA2DC,MAAAA,MAAM,EAAE;AAAnE,KAAD,CAAlB;AACH,GAPD;;AASA,QAAM+D,qBAAqB,GAAIC,IAAD,IAAU;AACpC5D,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,IAAAA,kBAAkB,CAAC0D,IAAD,CAAlB;AACH,GAHD;;AAKA,QAAMC,oBAAoB,GAAG,MAAM;AAC/B7D,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAE,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH,GAHD;;AAMA,QAAM4D,qBAAqB,GAAG,YAAW;AACrC,QAAI;AACA;AACA,YAAMC,UAAU,GAAG9D,eAAe,CAACgD,KAAhB,CAAsBe,OAAtB,CAA+B,WAAU3F,KAAK,CAACsE,MAAO,OAAMtE,KAAK,CAACuE,MAAO,wBAAzE,EAAkG,EAAlG,CAAnB;AACA,YAAMlF,OAAO,CAACuG,MAAR,CAAeF,UAAf,CAAN,CAHA,CAIA;;AACA,YAAM/C,SAAS,GAAG;AAACG,QAAAA,EAAE,EAAElB,eAAe,CAACkB;AAArB,OAAlB;AACA,YAAMxD,GAAG,CAAC2D,OAAJ,CAAY1D,gBAAgB,CAACG,UAAD,EAAa;AAAEwD,QAAAA,KAAK,EAAEP;AAAT,OAAb,CAA5B,CAAN,CANA,CAOA;;AACA,YAAM3C,KAAK,CAACyD,gBAAN,CAAwBC,cAAD,IAAoB;AAC7C,cAAMuB,aAAa,GAAGvB,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC2B,SAAhC,CAA0CC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,IAAUlB,eAAe,CAAC4C,UAA3E,CAAtB;AACA,cAAMqB,SAAS,GAAGnC,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2D2B,SAA3D,CAAqEC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,KAAWlB,eAAe,CAACkB,EAAvG,CAAlB;AACAP,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCqD,SAApC;AACAnC,QAAAA,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2DuC,MAA3D,CAAkED,SAAlE,EAA6E,CAA7E;AACA,eAAOnC,cAAP;AACH,OANK,CAAN;AAQAnB,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCxC,KAAK,CAAC6C,UAAxC;AACH,KAjBD,CAiBE,OAAMe,GAAN,EAAW;AACTrB,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCoB,GAAnC;AACH;;AACDjC,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAE,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH,GAvBD;;AAyBA,QAAMkE,uBAAuB,GAAIR,IAAD,IAAU;AACtCxD,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACAE,IAAAA,kBAAkB,CAACsD,IAAD,CAAlB;AACH,GAHD;;AAKA,QAAMS,kBAAkB,GAAG,MAAM;AAC7BjE,IAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACAE,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH,GAHD;;AAKA,QAAMgE,mBAAmB,GAAG,YAAW;AACnC1D,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;;AACA,QAAI;AACA;AACA,UAAI6B,GAAG,GAAGrC,eAAe,CAAC4C,KAA1B;AACArC,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;;AACA,UAAIzB,SAAJ,EAAe;AACX;AACAwB,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,cAAMkD,UAAU,GAAG1D,eAAe,CAAC4C,KAAhB,CAAsBe,OAAtB,CAA+B,WAAU3F,KAAK,CAACsE,MAAO,OAAMtE,KAAK,CAACuE,MAAO,wBAAzE,EAAkG,EAAlG,CAAnB;AACA,cAAMlF,OAAO,CAACuG,MAAR,CAAeF,UAAf,CAAN,CAJW,CAKX;;AACAnD,QAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,cAAMwB,SAAS,GAAGjD,SAAS,CAACgC,IAAV,CAAekB,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CAAlB;AACA,cAAM;AAAEC,UAAAA,IAAI,EAAEC;AAAR,YAAqBpD,SAA3B;AACA,cAAMqD,GAAG,GAAI,GAAEtE,IAAI,EAAG,GAAEkC,eAAe,CAACe,IAAK,IAAGiB,SAAU,EAA1D;AACAK,QAAAA,GAAG,GAAI,WAAUrE,KAAK,CAACsE,MAAO,OAAMtE,KAAK,CAACuE,MAAO,yBAAwBH,GAAI,EAA7E;AACA,cAAM/E,OAAO,CAACwF,GAAR,CAAYT,GAAZ,EAAiBrD,SAAjB,EAA4B;AAAC+D,UAAAA,WAAW,EAAEX;AAAd,SAA5B,CAAN;AACH;;AACD5B,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAjBA,CAkBA;;AACA,YAAMG,SAAS,GAAG;AACEG,QAAAA,EAAE,EAAEd,eAAe,CAACc,EADtB;AAEEC,QAAAA,IAAI,EAAEf,eAAe,CAACe,IAFxB;AAGE0B,QAAAA,WAAW,EAAEzC,eAAe,CAACyC,WAH/B;AAIEC,QAAAA,WAAW,EAAE1C,eAAe,CAAC0C,WAJ/B;AAKEC,QAAAA,KAAK,EAAE3C,eAAe,CAAC2C,KALzB;AAMEC,QAAAA,KAAK,EAAEP,GANT;AAOEjD,QAAAA,KAAK,EAAEY,eAAe,CAACZ,KAPzB;AAQED,QAAAA,IAAI,EAAEa,eAAe,CAACb,IARxB;AASEE,QAAAA,KAAK,EAAEW,eAAe,CAACX,KATzB;AAUEC,QAAAA,QAAQ,EAAEU,eAAe,CAACV,QAV5B;AAWEC,QAAAA,MAAM,EAAES,eAAe,CAACT;AAX1B,OAAlB;AAaA,YAAM2E,eAAe,GAAG,MAAM5G,GAAG,CAAC2D,OAAJ,CAAY1D,gBAAgB,CAACI,UAAD,EAAa;AAAEuD,QAAAA,KAAK,EAAEP;AAAT,OAAb,CAA5B,CAA9B;AACA,YAAMwD,WAAW,GAAGD,eAAe,CAAC9C,IAAhB,CAAqBzD,UAAzC;AACA4C,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAlCA,CAmCA;;AACAxC,MAAAA,KAAK,CAACyD,gBAAN,CAAwBC,cAAD,IAAoB;AACvC,cAAMuB,aAAa,GAAGvB,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC2B,SAAhC,CAA0CC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,IAAUd,eAAe,CAACwC,UAA3E,CAAtB;AACA,cAAMqB,SAAS,GAAGnC,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2D2B,SAA3D,CAAqEC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,KAAWd,eAAe,CAACc,EAAvG,CAAlB;AACAP,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCqD,SAApC;AACAnC,QAAAA,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2DsC,SAA3D,IAAwEM,WAAxE;AACA,eAAOzC,cAAP;AACH,OAND;AAOAnB,MAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACH,KA5CD,CA4CE,OAAMoB,GAAN,EAAW;AACTrB,MAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0CoB,GAA1C;AACH;;AACD7B,IAAAA,mBAAmB,CAAC,KAAD,CAAnB;AACAE,IAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACH,GAnDD;;AAqDA,QAAMmE,mBAAmB,GAAG,MAAMb,IAAN,IAAe;AACvChD,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0C+C,IAA1C;AACApD,IAAAA,iBAAiB,CAAC,qBAAD,CAAjB;AACA,UAAMkE,oBAAoB,CAACd,IAAD,EAAO,IAAP,CAA1B;AACH,GAJD;;AAMA,QAAMe,qBAAqB,GAAG,MAAMf,IAAN,IAAe;AACzChD,IAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA4C+C,IAA5C;AACApD,IAAAA,iBAAiB,CAAC,uBAAD,CAAjB;AACA,UAAMkE,oBAAoB,CAACd,IAAD,EAAO,KAAP,CAA1B;AACH,GAJD;;AAMA,QAAMc,oBAAoB,GAAG,OAAMd,IAAN,EAAYhE,MAAZ,KAAuB;AAChD,QAAI;AACA,YAAMoB,SAAS,GAAG;AACdG,QAAAA,EAAE,EAAEyC,IAAI,CAACzC,EADK;AAEdvB,QAAAA,MAAM,EAAEA;AAFM,OAAlB;AAIA,YAAM2E,eAAe,GAAG,MAAM5G,GAAG,CAAC2D,OAAJ,CAAY1D,gBAAgB,CAACI,UAAD,EAAa;AAAEuD,QAAAA,KAAK,EAAEP;AAAT,OAAb,CAA5B,CAA9B;AACA,YAAMwD,WAAW,GAAGD,eAAe,CAAC9C,IAAhB,CAAqBzD,UAAzC,CANA,CAOA;;AACAK,MAAAA,KAAK,CAACyD,gBAAN,CAAwBC,cAAD,IAAoB;AACvC,cAAMuB,aAAa,GAAGvB,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC2B,SAAhC,CAA0CC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,IAAUyC,IAAI,CAACf,UAAhE,CAAtB;AACA,cAAMqB,SAAS,GAAGnC,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2D2B,SAA3D,CAAqEC,GAAG,IAAIA,GAAG,CAACrC,EAAJ,KAAWyC,IAAI,CAACzC,EAA5F,CAAlB;AACAY,QAAAA,cAAc,CAACJ,UAAf,CAA0BC,KAA1B,CAAgC0B,aAAhC,EAA+C1B,KAA/C,CAAqDA,KAArD,CAA2DsC,SAA3D,IAAwEM,WAAxE;AACA,eAAOzC,cAAP;AACH,OALD;AAMH,KAdD,CAcE,OAAME,GAAN,EAAW;AACTrB,MAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ,EAAuCoB,GAAvC;AACH;;AACDzB,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACH,GAnBD;;AAqBA,QAAMoE,iBAAiB,GAAG,MAAM;AAC5BlE,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACH,GAFD;;AAIA,QAAMmE,cAAc,GAAG,MAAM;AACzBnE,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACH,GAFD;;AAIA,sBACI;AAAK,IAAA,SAAS,EAAEzC,OAAO,CAAC6G,QAAxB;AAAA,eACKvE,cAAc,iBACX;AAAA,8BACI;AAAK,QAAA,SAAS,EAAEtC,OAAO,CAAC8G;AAAxB;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAE9G,OAAO,CAAC+G,OAAxB;AAAA,+BACI;AAAA,oBAAIzE;AAAJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFR,EASKE,kBAAkB,iBACf;AAAA,8BACI;AAAK,QAAA,SAAS,EAAExC,OAAO,CAAC8G,QAAxB;AAAkC,QAAA,OAAO,EAAEF;AAA3C;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,SAAS,EAAE5G,OAAO,CAACgH,eAAxB;AAAA,+BACI;AAAK,UAAA,GAAG,EAAEtE,aAAa,GAAG,2CAAhB,GAA8DtC,KAAK,CAAC6C,UAAN,CAAiBC;AAAzF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAVR,eAqBI;AAAK,MAAA,SAAS,EAAElD,OAAO,CAACiH,OAAxB;AAAA,8BACI;AAAK,QAAA,SAAS,EAAEjH,OAAO,CAACkH,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAII;AAAK,QAAA,SAAS,EAAElH,OAAO,CAACmH,QAAxB;AAAA,gCACI;AAAK,UAAA,SAAS,EAAEnH,OAAO,CAACoH,YAAxB;AAAA,qBACK/G,mBAAmB,iBAChB;AAAA,oCACI;AAAK,cAAA,SAAS,EAAEL,OAAO,CAAC8G,QAAxB;AAAkC,cAAA,OAAO,EAAE7C;AAA3C;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAK,cAAA,SAAS,EAAEjE,OAAO,CAACqH,eAAxB;AAAA,yDACmB;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,QAAQ,EAAGC,CAAD,IAAO;AAAC9G,kBAAAA,eAAe,CAAC8G,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf;AAAgC;AAArE;AAAA;AAAA;AAAA;AAAA,sBADnB,eAEI;AAAQ,gBAAA,OAAO,EAAE1E,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAQ,gBAAA,OAAO,EAAEmB,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFR,eAWI;AAAK,YAAA,SAAS,EAAEjE,OAAO,CAACyH,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAXJ,eAcI;AAAK,YAAA,SAAS,EAAEzH,OAAO,CAAC0H,MAAxB;AAAA,sBAEKtH,KAAK,CAAC6C,UAAN,CAAiBS,UAAjB,CAA4BC,KAA7B,KACKvD,KAAK,CAAC6C,UAAN,CAAiBS,UAAjB,CAA4BC,KAA5B,CAAkCgE,MAAlC,GAA2C,CAA5C,GACIvH,KAAK,CAAC6C,UAAN,CAAiBS,UAAjB,CAA4BC,KAA5B,CAAkCiE,GAAlC,CAAsC,CAACC,QAAD,EAAWC,KAAX,kBAClC;AAAK,cAAA,SAAS,EAAE9H,OAAO,CAAC+H,QAAxB;AAAA,qCAEI;AAAQ,gBAAA,SAAS,EAAE/H,OAAO,CAACgI,MAA3B;AAAmC,gBAAA,OAAO,EAAE,MAAMnG,kBAAkB,CAAC;AAACqB,kBAAAA,EAAE,EAAE2E,QAAQ,CAAC3E,EAAd;AAAkBC,kBAAAA,IAAI,EAAE0E,QAAQ,CAAC1E;AAAjC,iBAAD,CAApE;AAAA,0BAA+G0E,QAAQ,CAAC1E;AAAxH;AAAA;AAAA;AAAA;AAAA;AAFJ,eAAuC0E,QAAQ,CAAC3E,EAAT,GAAc2E,QAAQ,CAAC3E,EAAvB,GAA4B4E,KAAnE;AAAA;AAAA;AAAA;AAAA,oBADJ,CADJ,gBASI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVR;AAFJ;AAAA;AAAA;AAAA;AAAA,kBAdJ,eA+BI;AAAK,YAAA,SAAS,EAAE9H,OAAO,CAACiI,aAAxB;AAAA,mCACI;AAAQ,cAAA,SAAS,EAAEjI,OAAO,CAACkI,OAA3B;AAAoC,cAAA,OAAO,EAAErF,kBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBA/BJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAoCKf,iBAAiB,iBACd;AAAA,kCACI;AAAK,YAAA,SAAS,EAAE9B,OAAO,CAAC8G,QAAxB;AAAkC,YAAA,OAAO,EAAElB;AAA3C;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAE5F,OAAO,CAACmI,oBAAxB;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAQ,cAAA,OAAO,EAAEtC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAQ,cAAA,OAAO,EAAED,oBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBArCR,EA8CK1D,gBAAgB,iBACb;AAAA,kCACI;AAAK,YAAA,SAAS,EAAElC,OAAO,CAAC8G,QAAxB;AAAkC,YAAA,OAAO,EAAEV;AAA3C;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,YAAA,SAAS,EAAEpG,OAAO,CAACqH,eAAxB;AAAA,oCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI;AAAA,gDAAW;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,WAAW,EAAEjF,eAAe,CAACe,IAAhD;AAAsD,gBAAA,QAAQ,EAAGmE,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAUjF,sBAAAA,IAAI,EAAEmE,CAAC,CAACC,MAAF,CAASC;AAAzB,qBAAP;AAAuC,mBAAnD,CAAlB;AAAuE;AAA/I;AAAA;AAAA;AAAA;AAAA,sBAAX;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFJ,eAGI;AAAA,uDAAkB;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,WAAW,EAAEpF,eAAe,CAACyC,WAAhD;AAA6D,gBAAA,QAAQ,EAAGyC,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAUvD,sBAAAA,WAAW,EAAEyC,CAAC,CAACC,MAAF,CAASC;AAAhC,qBAAP;AAA8C,mBAA1D,CAAlB;AAA8E;AAA7J;AAAA;AAAA;AAAA;AAAA,sBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,eAII;AAAA,uDAAkB;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,WAAW,EAAEpF,eAAe,CAAC0C,WAAhD;AAA6D,gBAAA,QAAQ,EAAGwC,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAUtD,sBAAAA,WAAW,EAAEwC,CAAC,CAACC,MAAF,CAASC;AAAhC,qBAAP;AAA8C,mBAA1D,CAAlB;AAA8E;AAA7J;AAAA;AAAA;AAAA;AAAA,sBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,eAKI;AAAA,iDAAY;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,WAAW,EAAEpF,eAAe,CAAC2C,KAAhD;AAAuD,gBAAA,QAAQ,EAAGuC,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAUrD,sBAAAA,KAAK,EAAEuC,CAAC,CAACC,MAAF,CAASC;AAA1B,qBAAP;AAAwC,mBAApD,CAAlB;AAAwE;AAAjJ;AAAA;AAAA;AAAA;AAAA,sBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,oBALJ,eAMI;AAAA,iDAAY;AAAO,gBAAA,IAAI,EAAC,MAAZ;AAAmB,gBAAA,QAAQ,EAAGF,CAAD,IAAO;AAAClG,kBAAAA,YAAY,CAACkG,CAAC,CAACC,MAAF,CAASc,KAAT,CAAe,CAAf,CAAD,CAAZ;AAAgC;AAArE;AAAA;AAAA;AAAA;AAAA,sBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,oBANJ,eAOI;AAAA,sCACI;AAAO,gBAAA,IAAI,EAAC,UAAZ;AAAuB,gBAAA,EAAE,EAAC,MAA1B;AAAiC,gBAAA,OAAO,EAAEjG,eAAe,CAACb,IAA1D;AAAgE,gBAAA,OAAO,EAClE+F,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAU7G,sBAAAA,IAAI,EAAE+F,CAAC,CAACC,MAAF,CAASe;AAAzB,qBAAP;AAAyC,mBAArD,CAAlB;AAAyE;AADrF;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII;AAAO,gBAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAPJ,eAaI;AAAA,sCACI;AAAO,gBAAA,IAAI,EAAC,UAAZ;AAAuB,gBAAA,EAAE,EAAC,OAA1B;AAAkC,gBAAA,OAAO,EAAElG,eAAe,CAACZ,KAA3D;AAAkE,gBAAA,OAAO,EACpE8F,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAU5G,sBAAAA,KAAK,EAAE8F,CAAC,CAACC,MAAF,CAASe;AAA1B,qBAAP;AAA0C,mBAAtD,CAAlB;AAA0E;AADtF;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII;AAAO,gBAAA,GAAG,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbJ,eAmBI;AAAA,sCACI;AAAO,gBAAA,IAAI,EAAC,UAAZ;AAAuB,gBAAA,EAAE,EAAC,OAA1B;AAAkC,gBAAA,OAAO,EAAElG,eAAe,CAACX,KAA3D;AAAkE,gBAAA,OAAO,EACpE6F,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAU3G,sBAAAA,KAAK,EAAE6F,CAAC,CAACC,MAAF,CAASe;AAA1B,qBAAP;AAA0C,mBAAtD,CAAlB;AAA0E;AADtF;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII;AAAO,gBAAA,GAAG,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAnBJ,eAyBI;AAAA,sCACI;AAAO,gBAAA,IAAI,EAAC,UAAZ;AAAuB,gBAAA,EAAE,EAAC,UAA1B;AAAqC,gBAAA,OAAO,EAAElG,eAAe,CAACV,QAA9D;AAAwE,gBAAA,OAAO,EAC1E4F,CAAD,IAAO;AAACjF,kBAAAA,kBAAkB,CAAE+F,IAAD,IAAU;AAAC,2BAAO,EAAC,GAAGA,IAAJ;AAAU1G,sBAAAA,QAAQ,EAAE4F,CAAC,CAACC,MAAF,CAASe;AAA7B,qBAAP;AAA6C,mBAAzD,CAAlB;AAA6E;AADzF;AAAA;AAAA;AAAA;AAAA,sBADJ,eAII;AAAO,gBAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAzBJ,eA+BI;AAAQ,cAAA,OAAO,EAAEjC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBA/BJ,eAgCI;AAAQ,cAAA,OAAO,EAAED,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAhCJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBA/CR,eAqFI;AAAI,UAAA,IAAI,EAAC,GAAT;AAAa,UAAA,KAAK,EAAC,SAAnB;AAA6B,UAAA,SAAS,EAAEpG,OAAO,CAACuI;AAAhD;AAAA;AAAA;AAAA;AAAA,gBArFJ,eAsFI;AAAK,UAAA,SAAS,EAAEvI,OAAO,CAACwI,mBAAxB;AAAA,oBAEK5G,eAAD,gBACI;AAAA,mCAEI;AAAK,cAAA,SAAS,EAAE5B,OAAO,CAACyI,WAAxB;AAAA,sCACI;AAAK,gBAAA,SAAS,EAAEzI,OAAO,CAAC0I,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAK,gBAAA,SAAS,EAAE1I,OAAO,CAAC2I,QAAxB;AAAA,0BAEQvI,KAAK,CAAC6C,UAAN,CAAiBS,UAAjB,CAA4BC,KAA5B,CAAkCiF,MAAlC,CAA0Cf,QAAD,IAAc;AACnD,yBAAOA,QAAQ,CAAC3E,EAAT,KAAgBtB,eAAe,CAACsB,EAAvC;AACH,iBAFD,EAEG0E,GAFH,CAEO,CAACC,QAAD,EAAWC,KAAX,KAAqB;AACxB,yBAAOD,QAAQ,CAAClE,KAAT,CAAeA,KAAf,CAAqBiE,GAArB,CAAyB,CAACjC,IAAD,EAAOmC,KAAP,KAAiB;AAC7C,wBAAI,CAAEnC,IAAI,CAAChE,MAAX,EAAoB;AAChB,0CACI;AAAK,wBAAA,SAAS,EAAE3B,OAAO,CAAC+H,QAAxB;AAAA,gDACI;AAAK,0BAAA,GAAG,EAAEpC,IAAI,CAACX;AAAf;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI;AAAA,oCAAIW,IAAI,CAACxC;AAAT;AAAA;AAAA;AAAA;AAAA,gCAFJ,eAGI;AAAQ,0BAAA,OAAO,EAAE,MAAMuC,qBAAqB,CAACC,IAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAHJ,eAII;AAAQ,0BAAA,OAAO,EAAE,MAAMQ,uBAAuB,CAACR,IAAD,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJJ,eAKI;AAAQ,0BAAA,OAAO,EAAE,YAAW,MAAMa,mBAAmB,CAACb,IAAD,CAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCALJ;AAAA,yBAAuCA,IAAI,CAACzC,EAAL,GAAUyC,IAAI,CAACzC,EAAf,GAAoB4E,KAA3D;AAAA;AAAA;AAAA;AAAA,8BADJ;AASH;AACJ,mBAZM,CAAP;AAaH,iBAhBD;AAFR;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAuBI;AAAA,0BAEQ1H,KAAK,CAAC6C,UAAN,CAAiBS,UAAjB,CAA4BC,KAA5B,CAAkCiF,MAAlC,CAA0Cf,QAAD,IAAc;AACnD,yBAAOA,QAAQ,CAAC3E,EAAT,KAAgBtB,eAAe,CAACsB,EAAvC;AACH,iBAFD,EAEG0E,GAFH,CAEO,CAACC,QAAD,EAAWC,KAAX,KAAqB;AACxB,yBAAOD,QAAQ,CAAClE,KAAT,CAAeA,KAAf,CAAqBiE,GAArB,CAAyB,CAACjC,IAAD,EAAOmC,KAAP,KAAiB;AAC7C,wBAAInC,IAAI,CAAChE,MAAT,EAAiB;AACb,0CACI;AAAA,gDACI;AAAK,0BAAA,GAAG,EAAEgE,IAAI,CAACX;AAAf;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI;AAAA,oCAAIW,IAAI,CAACxC;AAAT;AAAA;AAAA;AAAA;AAAA,gCAFJ,eAGI;AAAQ,0BAAA,OAAO,EAAE,MAAMuC,qBAAqB,CAACC,IAAD,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAHJ,eAII;AAAQ,0BAAA,OAAO,EAAE,MAAMQ,uBAAuB,CAACR,IAAD,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJJ,eAKI;AAAQ,0BAAA,OAAO,EAAE,YAAW,MAAMe,qBAAqB,CAACf,IAAD,CAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCALJ;AAAA,yBAAUA,IAAI,CAACzC,EAAL,GAAUyC,IAAI,CAACzC,EAAf,GAAoB4E,KAA9B;AAAA;AAAA;AAAA;AAAA,8BADJ;AASH;AACJ,mBAZM,CAAP;AAaH,iBAhBD;AAFR;AAAA;AAAA;AAAA;AAAA,sBAvBJ,EA4CKrH,eAAe,iBACZ;AAAA,wCACI;AAAK,kBAAA,SAAS,EAAET,OAAO,CAAC8G,QAAxB;AAAkC,kBAAA,OAAO,EAAErB;AAA3C;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAK,kBAAA,SAAS,EAAEzF,OAAO,CAACqH,eAAxB;AAAA,0CACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,eAEI;AAAA,sDAAW;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,EAAGC,CAAD,IAAO;AAAC1G,wBAAAA,WAAW,CAAC0G,CAAC,CAACC,MAAF,CAASC,KAAV,CAAX;AAA4B;AAAjE;AAAA;AAAA;AAAA;AAAA,4BAAX;AAAA;AAAA;AAAA;AAAA;AAAA,0BAFJ,eAGI;AAAA,6DAAkB;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,EAAGF,CAAD,IAAO;AAACxG,wBAAAA,kBAAkB,CAACwG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB;AAAmC;AAAxE;AAAA;AAAA;AAAA;AAAA,4BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAHJ,eAII;AAAA,6DAAkB;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,EAAGF,CAAD,IAAO;AAACtG,wBAAAA,kBAAkB,CAACsG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB;AAAmC;AAAxE;AAAA;AAAA;AAAA;AAAA,4BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,0BAJJ,eAKI;AAAA,wDAAa;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,EAAGF,CAAD,IAAO;AAACpG,wBAAAA,YAAY,CAACoG,CAAC,CAACC,MAAF,CAASC,KAAV,CAAZ;AAA6B;AAAlE;AAAA;AAAA;AAAA;AAAA,4BAAb;AAAA;AAAA;AAAA;AAAA;AAAA,0BALJ,eAMI;AAAA,uDAAY;AAAO,sBAAA,IAAI,EAAC,MAAZ;AAAmB,sBAAA,QAAQ,EAAGF,CAAD,IAAO;AAAClG,wBAAAA,YAAY,CAACkG,CAAC,CAACC,MAAF,CAASc,KAAT,CAAe,CAAf,CAAD,CAAZ;AAAgC;AAArE;AAAA;AAAA;AAAA;AAAA,4BAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,0BANJ,eAOI;AAAA,4CACI;AAAO,sBAAA,IAAI,EAAC,UAAZ;AAAuB,sBAAA,EAAE,EAAC,MAA1B;AAAiC,sBAAA,OAAO,EACnCf,CAAD,IAAO;AAAChG,wBAAAA,kBAAkB,CAAE8G,IAAD,IAAU;AAAC,iCAAO,EAAC,GAAGA,IAAJ;AAAU7G,4BAAAA,IAAI,EAAE+F,CAAC,CAACC,MAAF,CAASe;AAAzB,2BAAP;AAAyC,yBAArD,CAAlB;AAAyE;AADrF;AAAA;AAAA;AAAA;AAAA,4BADJ,eAII;AAAO,sBAAA,GAAG,EAAC,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAPJ,eAaI;AAAA,4CACI;AAAO,sBAAA,IAAI,EAAC,UAAZ;AAAuB,sBAAA,EAAE,EAAC,OAA1B;AAAkC,sBAAA,OAAO,EACpChB,CAAD,IAAO;AAAChG,wBAAAA,kBAAkB,CAAE8G,IAAD,IAAU;AAAC,iCAAO,EAAC,GAAGA,IAAJ;AAAU5G,4BAAAA,KAAK,EAAE8F,CAAC,CAACC,MAAF,CAASe;AAA1B,2BAAP;AAA0C,yBAAtD,CAAlB;AAA0E;AADtF;AAAA;AAAA;AAAA;AAAA,4BADJ,eAII;AAAO,sBAAA,GAAG,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAbJ,eAmBI;AAAA,4CACI;AAAO,sBAAA,IAAI,EAAC,UAAZ;AAAuB,sBAAA,EAAE,EAAC,OAA1B;AAAkC,sBAAA,OAAO,EACpChB,CAAD,IAAO;AAAChG,wBAAAA,kBAAkB,CAAE8G,IAAD,IAAU;AAAC,iCAAO,EAAC,GAAGA,IAAJ;AAAU3G,4BAAAA,KAAK,EAAE6F,CAAC,CAACC,MAAF,CAASe;AAA1B,2BAAP;AAA0C,yBAAtD,CAAlB;AAA0E;AADtF;AAAA;AAAA;AAAA;AAAA,4BADJ,eAII;AAAO,sBAAA,GAAG,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAnBJ,eAyBI;AAAA,4CACI;AAAO,sBAAA,IAAI,EAAC,UAAZ;AAAuB,sBAAA,EAAE,EAAC,UAA1B;AAAqC,sBAAA,OAAO,EACvChB,CAAD,IAAO;AAAChG,wBAAAA,kBAAkB,CAAE8G,IAAD,IAAU;AAAC,iCAAO,EAAC,GAAGA,IAAJ;AAAU1G,4BAAAA,QAAQ,EAAE4F,CAAC,CAACC,MAAF,CAASe;AAA7B,2BAAP;AAA6C,yBAAzD,CAAlB;AAA6E;AADzF;AAAA;AAAA;AAAA;AAAA,4BADJ,eAII;AAAO,sBAAA,GAAG,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,0BAzBJ,eA+BI;AAAQ,oBAAA,OAAO,EAAEnE,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BA/BJ,eAgCI;AAAQ,oBAAA,OAAO,EAAEsB,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAhCJ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBA7CR,eAmFI;AAAQ,gBAAA,OAAO,EAAEvB,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAnFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,kBADJ,gBA0FI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA5FR;AAAA;AAAA;AAAA;AAAA,gBAtFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,YArBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAsNH,CAjfD;;GAAM/D,Q;;KAAAA,Q;AAmfN,eAAeA,QAAf","sourcesContent":["import React from 'react';\nimport { useEffect, useState } from 'react/cjs/react.development';\n\nimport Storage from '@aws-amplify/storage';\nimport API from '@aws-amplify/api';\nimport { graphqlOperation } from '@aws-amplify/api-graphql';\nimport { createCategory } from '../../graphql/mutations';\nimport { createItem } from '../../graphql/mutations';\nimport { deleteItem } from '../../graphql/mutations';\nimport { updateItem } from '../../graphql/mutations';\n\nimport classes from './EditMenu.module.css';\nimport { v4 as uuid } from 'uuid';\n\nconst EditMenu = (props) => {\n    // props = [bucket, region, restaurant, restaurantSetter]\n    //const [items, setItems] = useState(null);\n\n    const [categoryAdderOpened, setCategoryAdderOpened] = useState(false);\n    const [categoryName, setCategoryName] = useState('');\n\n    const [itemAdderOpened, setItemAdderOpened] = useState(false);\n    const [itemName, setItemName] = useState('');\n    const [itemDescription, setItemDescription] = useState('');\n    const [itemIngredients, setItemIngredients] = useState('');\n    const [itemPrice, setItemPrice] = useState('');\n    const [itemImage, setItemImage] = useState(null);\n    const [itemSpecialities, setItemSpecilities] =\n         useState({vege: false, vegan: false, halal: false, featured: false, hidden: false});\n    \n    const [currentCategory, setCurrentCategory] = useState(null);\n\n    const [deleteModalOpened, setDeleteModalOpened] = useState(false);\n    const [itemToBeDeleted, setItemToBeDeleted] = useState(null);\n\n    const [itemEditorOpened, setItemEditorOpened] = useState(false);\n    const [itemToBeEditted, setItemToBeEditted] = useState(null);\n\n    const [loadingMessage, setLoadingMessage] = useState(null);\n\n    const [qrCodeViewerOpened, setQRCodeViewerOpened] = useState(false);\n\n    const qrCodeURLBase = 'https://api.qrserver.com/v1/create-qr-code/?size=250x250&data='\n\n    console.log('rendering EditMenu')\n\n    const AddCategoryHandler = () => {\n        setCategoryAdderOpened(true)\n    }\n\n    const onAddCategoryConfirm = async() => {\n        console.log('from onAddCategoryConfirm');\n        if (categoryName === '') {\n            return\n        }\n\n        const inputData = { restaurantID: props.restaurant.id, name: categoryName }\n        try {\n            const newCategoryData = await API.graphql(graphqlOperation(createCategory, { input: inputData }))\n            const newCategory = newCategoryData.data.createCategory;\n\n            let newCategories = props.restaurant.categories.items\n            if (newCategories) {\n                console.log('current category', newCategories)\n                console.log('categories with items');\n                newCategories.push(newCategory);\n                console.log('updated category', newCategories)\n            } else {\n                console.log('categories empty');\n                newCategories = [newCategory]\n            }\n            \n            props.restaurantSetter((prevRestaurant) => {\n                let newRestaurant = prevRestaurant;\n                newRestaurant.categories.items = newCategories;\n                return newRestaurant;\n            })\n            console.log('from onAddCategoryConfirm success');\n        } catch (err) {\n            console.log('error creating category:', err);\n        }\n\n        setCategoryAdderOpened(false)\n    }\n\n    const onAddCategoryCancel = () => {\n        setCategoryAdderOpened(false)\n    }\n\n    const AddMenuHandler = () => {\n        setItemAdderOpened(true)\n    }\n\n    const onAddItemConfirm = async() => {\n        console.log('onAddItemConfirm');\n        if (itemName === '' || !itemImage || itemPrice === '') {\n            return\n        }\n\n        const extension = itemImage.name.split(\".\")[1];\n        const { type: mimeType } = itemImage;\n        const key = `${uuid()}${itemName}.${extension}`;\n        const url = `https://${props.bucket}.s3.${props.region}.amazonaws.com/public/${key}`;\n        const inputData = { categoryID: currentCategory.id,\n                            name: itemName,\n                            description: itemDescription,\n                            ingredients: itemIngredients,\n                            price: itemPrice,\n                            image: url,\n                            vegan: itemSpecialities.vegan,\n                            vege: itemSpecialities.vege,\n                            halal: itemSpecialities.halal,\n                            featured: itemSpecialities.featured,\n                            hidden: itemSpecialities.hidden,\n        }\n\n        try {\n            // s3 update\n            await Storage.put(key, itemImage, {contentType: mimeType});\n            // api update\n            const newItemData = await API.graphql(graphqlOperation(createItem, { input: inputData }))\n            console.log('from onAddItemConfirm: newItemData : ', newItemData);\n            const newItem = newItemData.data.createItem;\n\n            props.restaurantSetter((prevRestaurant) => {\n                const categoryIndex = prevRestaurant.categories.items.findIndex((obj => obj.id === currentCategory.id))\n                let updatedCategory = prevRestaurant.categories.items[categoryIndex];\n                if (!(updatedCategory.items)) {\n                    updatedCategory = { ...updatedCategory, items: {items: []}}\n                }\n                prevRestaurant.categories.items[categoryIndex] = updatedCategory;\n                prevRestaurant.categories.items[categoryIndex].items.items.push(newItem);\n                return prevRestaurant;\n            })\n\n        } catch (err) {\n            console.log('error creating items:', err);\n        }\n\n        setItemAdderOpened(false)\n        setItemName('');\n        setItemDescription('');\n        setItemIngredients('');\n        setItemImage(null);\n        setItemSpecilities({vege: false, vegan: false, halal: false, featured: false, hidden: false})\n        setCategoryAdderOpened(false)\n    }\n    \n    const onAddItemCancel = () => {\n        setItemAdderOpened(false)\n        setItemName('');\n        setItemDescription('');\n        setItemIngredients('');\n        setItemImage(null);\n        setItemSpecilities({vege: false, vegan: false, halal: false, featured: false, hidden: false})\n    }\n\n    const onDeleteButtonClicked = (item) => {\n        setDeleteModalOpened(true);\n        setItemToBeDeleted(item);\n    }\n\n    const onDeleteItemCanceled = () => {\n        setDeleteModalOpened(false);\n        setItemToBeDeleted(null);\n    }\n\n\n    const onDeleteItemConfirmed = async() => {\n        try {\n            //s3 update\n            const deletedKey = itemToBeDeleted.image.replace(`https://${props.bucket}.s3.${props.region}.amazonaws.com/public/`, '');\n            await Storage.remove(deletedKey);\n            //api update\n            const inputData = {id: itemToBeDeleted.id}\n            await API.graphql(graphqlOperation(deleteItem, { input: inputData }))\n            //restaurant update\n            await props.restaurantSetter((prevRestaurant) => {\n                const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id == itemToBeDeleted.categoryID)\n                const itemIndex = prevRestaurant.categories.items[categoryIndex].items.items.findIndex(obj => obj.id === itemToBeDeleted.id)\n                console.log('deleting item index:', itemIndex);\n                prevRestaurant.categories.items[categoryIndex].items.items.splice(itemIndex, 1);\n                return prevRestaurant;\n            })\n\n            console.log('from onItemDeleted', props.restaurant);\n        } catch(err) {\n            console.log('error deleting item', err);\n        }\n        setDeleteModalOpened(false);\n        setItemToBeDeleted(null);\n    }\n\n    const onEditItemButtonClicked = (item) => {\n        setItemEditorOpened(true);\n        setItemToBeEditted(item);\n    }\n\n    const onEditItemCanceled = () => {\n        setItemEditorOpened(false);\n        setItemToBeEditted(null);\n    }\n\n    const onEditItemConfirmed = async() => {\n        console.log('onEditItemConfirmed start')\n        try {\n            //s3 update\n            let url = itemToBeEditted.image\n            console.log('onEditItemConfirmed 1')\n            if (itemImage) {\n                //1. s3 delete\n                console.log('onEditItemConfirmed 2')\n                const deletedKey = itemToBeEditted.image.replace(`https://${props.bucket}.s3.${props.region}.amazonaws.com/public/`, '');\n                await Storage.remove(deletedKey);\n                //2. s3 upload\n                console.log('onEditItemConfirmed 3')\n                const extension = itemImage.name.split(\".\")[1];\n                const { type: mimeType } = itemImage;\n                const key = `${uuid()}${itemToBeEditted.name}.${extension}`;\n                url = `https://${props.bucket}.s3.${props.region}.amazonaws.com/public/${key}`;\n                await Storage.put(key, itemImage, {contentType: mimeType});\n            }\n            console.log('onEditItemConfirmed 4')\n            //api update\n            const inputData = { \n                                id: itemToBeEditted.id,\n                                name: itemToBeEditted.name,\n                                description: itemToBeEditted.description,\n                                ingredients: itemToBeEditted.ingredients,\n                                price: itemToBeEditted.price,\n                                image: url,\n                                vegan: itemToBeEditted.vegan,\n                                vege: itemToBeEditted.vege,\n                                halal: itemToBeEditted.halal,\n                                featured: itemToBeEditted.featured,\n                                hidden: itemToBeEditted.hidden,\n            }\n            const updatedItemData = await API.graphql(graphqlOperation(updateItem, { input: inputData }))\n            const updatedItem = updatedItemData.data.updateItem;\n            console.log('onEditItemConfirmed 5')\n            //restaurant update\n            props.restaurantSetter((prevRestaurant) => {\n                const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id == itemToBeEditted.categoryID)\n                const itemIndex = prevRestaurant.categories.items[categoryIndex].items.items.findIndex(obj => obj.id === itemToBeEditted.id)\n                console.log('deleting item index:', itemIndex);\n                prevRestaurant.categories.items[categoryIndex].items.items[itemIndex] = updatedItem;\n                return prevRestaurant;\n            })\n            console.log('onEditItemConfirmed 5')\n        } catch(err) {\n            console.log('error onEditItemConfirmed:', err)\n        }\n        setItemEditorOpened(false);\n        setItemToBeEditted(null);\n    }\n\n    const onHideButtonClicked = async(item) => {\n        console.log('from onHideButtonClicked: ', item)\n        setLoadingMessage('hiding from Menu...');\n        await changeItemVisibility(item, true);\n    }\n\n    const onRevealButtonClicked = async(item) => {\n        console.log('from onRevealButtonClicked: ', item)\n        setLoadingMessage('revealing to Menu ...');\n        await changeItemVisibility(item, false);\n    }\n\n    const changeItemVisibility = async(item, hidden) => {\n        try {\n            const inputData = {\n                id: item.id,\n                hidden: hidden\n            }\n            const updatedItemData = await API.graphql(graphqlOperation(updateItem, { input: inputData }))\n            const updatedItem = updatedItemData.data.updateItem;\n            //restaurant update\n            props.restaurantSetter((prevRestaurant) => {\n                const categoryIndex = prevRestaurant.categories.items.findIndex(obj => obj.id == item.categoryID)\n                const itemIndex = prevRestaurant.categories.items[categoryIndex].items.items.findIndex(obj => obj.id === item.id)\n                prevRestaurant.categories.items[categoryIndex].items.items[itemIndex] = updatedItem;\n                return prevRestaurant;\n            })\n        } catch(err) {\n            console.log('error toggling hidden: ', err)\n        }\n        setLoadingMessage(null);\n    }\n\n    const onQRCodeRequested = () => {\n        setQRCodeViewerOpened(true);\n    }\n\n    const onQRCodeClosed = () => {\n        setQRCodeViewerOpened(false);\n    }\n\n    return (\n        <div className={classes.editMenu}>\n            {loadingMessage && (\n                <div>\n                    <div className={classes.backdrop}/>\n                    <div className={classes.loading}>\n                        <p>{loadingMessage}</p>\n                    </div>\n                </div>\n            )}\n            {qrCodeViewerOpened && (\n                <div>\n                    <div className={classes.backdrop} onClick={onQRCodeClosed} />\n                    <div className={classes.qrCodeContainer}>\n                        <img src={qrCodeURLBase + 'new-feature.d1ac5hakempkoy.amplifyapp.com' + props.restaurant.id}></img>\n                    </div>\n                </div>\n\n            )}\n            {/* <div>\n                <button onClick={onQRCodeRequested}>QR Code</button>\n            </div> */}\n            <div className={classes.content}>\n                <div className={classes.mainText}>\n                    Your Menu\n                </div>\n                <div className={classes.editArea}>\n                    <div className={classes.categoryArea}>\n                        {categoryAdderOpened && (\n                            <div>\n                                <div className={classes.backdrop} onClick={onAddCategoryCancel} />\n                                <div className={classes.editorContainer}>\n                                    Category Name: <input type='text' onChange={(e) => {setCategoryName(e.target.value)}} />\n                                    <button onClick={onAddCategoryConfirm}>Confirm</button>\n                                    <button onClick={onAddCategoryCancel}>Cancel</button>\n                                </div>\n                            </div>\n                        )}\n                        <div className={classes.Ctext}>\n                            Categories\n                        </div>\n                        <div className={classes.Citems}>\n                        {\n                            (props.restaurant.categories.items) && (\n                                (props.restaurant.categories.items.length > 0) ? (\n                                    props.restaurant.categories.items.map((category, index) => (\n                                        <div className={classes.eachItem} key={category.id ? category.id : index}>\n                                            {/* <div className={classes.eachItem}> */}\n                                            <button className={classes.button} onClick={() => setCurrentCategory({id: category.id, name: category.name})}>{category.name}</button>\n                                            {/* </div> */}\n                                        </div>\n                                    ))\n                                ) : (\n                                    <p>Add Your Restaurant Menu Category!</p>\n                                )\n                            )\n                        }\n                        </div>\n                        <div className={classes.buttonSection}>\n                            <button className={classes.Cbutton} onClick={AddCategoryHandler}>+ Add</button>\n                        </div>\n                    </div>\n                    {deleteModalOpened && (\n                        <div>\n                            <div className={classes.backdrop} onClick={onDeleteItemCanceled} />\n                            <div className={classes.deleteModalContainer}>\n                                <p>You Sure?</p>\n                                <button onClick={onDeleteItemConfirmed}>Confirm</button>\n                                <button onClick={onDeleteItemCanceled}>Cancel</button>\n                            </div>\n                        </div>\n                    )}\n                    {itemEditorOpened && (\n                        <div>\n                            <div className={classes.backdrop} onClick={onEditItemCanceled} />\n                            <div className={classes.editorContainer}>\n                                <p>Edit an Item</p>\n                                <div>Name: <input type='text' placeholder={itemToBeEditted.name} onChange={(e) => {setItemToBeEditted((prev) => {return {...prev, name: e.target.value}})}} /></div>\n                                <div>Description: <input type='text' placeholder={itemToBeEditted.description} onChange={(e) => {setItemToBeEditted((prev) => {return {...prev, description: e.target.value}})}} /></div>\n                                <div>Ingredients: <input type='text' placeholder={itemToBeEditted.ingredients} onChange={(e) => {setItemToBeEditted((prev) => {return {...prev, ingredients: e.target.value}})}} /></div>\n                                <div>Price: <input type='text' placeholder={itemToBeEditted.price} onChange={(e) => {setItemToBeEditted((prev) => {return {...prev, price: e.target.value}})}} /></div>\n                                <div>Image: <input type='file' onChange={(e) => {setItemImage(e.target.files[0])}} /></div>\n                                <div>\n                                    <input type=\"checkbox\" id=\"vege\" checked={itemToBeEditted.vege} onClick={\n                                        (e) => {setItemToBeEditted((prev) => {return {...prev, vege: e.target.checked}})}\n                                        } />\n                                    <label for=\"vege\">vegetarian</label>\n                                </div>\n                                <div>\n                                    <input type=\"checkbox\" id=\"vegan\" checked={itemToBeEditted.vegan} onClick={\n                                        (e) => {setItemToBeEditted((prev) => {return {...prev, vegan: e.target.checked}})}\n                                        } />\n                                    <label for=\"vegan\">vegan</label>\n                                </div>\n                                <div>\n                                    <input type=\"checkbox\" id=\"halal\" checked={itemToBeEditted.halal} onClick={\n                                        (e) => {setItemToBeEditted((prev) => {return {...prev, halal: e.target.checked}})}\n                                        } />\n                                    <label for=\"halal\">halal</label>\n                                </div>\n                                <div>\n                                    <input type=\"checkbox\" id=\"featured\" checked={itemToBeEditted.featured} onClick={\n                                        (e) => {setItemToBeEditted((prev) => {return {...prev, featured: e.target.checked}})}\n                                        } />\n                                    <label for=\"featured\">featured</label>\n                                </div>\n                                <button onClick={onEditItemConfirmed}>Save</button>\n                                <button onClick={onEditItemCanceled}>Cancel</button>\n                            </div>\n                        </div>\n                    )}\n                    <hr size=\"1\" color=\"#6B2200\" className={classes.line}></hr>\n                    <div className={classes.currentCategoryArea}>\n                    {\n                        (currentCategory) ? (\n                            <div>\n                                {/* <p>currentCategory: {currentCategory.name} </p> */}\n                                <div className={classes.itemContent}>\n                                    <div className={classes.Itext}> Items</div>\n                                    <div className={classes.itemArea}>\n                                        {\n                                            props.restaurant.categories.items.filter((category) => {\n                                                return category.id === currentCategory.id\n                                            }).map((category, index) => {\n                                                return category.items.items.map((item, index) => {\n                                                    if (!(item.hidden)) {\n                                                        return (\n                                                            <div className={classes.eachItem} key={item.id ? item.id : index}>\n                                                                <img src={item.image}></img>\n                                                                <p>{item.name}</p>\n                                                                <button onClick={() => onDeleteButtonClicked(item)}>delete</button>\n                                                                <button onClick={() => onEditItemButtonClicked(item)}>edit</button>\n                                                                <button onClick={async() => await onHideButtonClicked(item)}>hide from menu</button>\n                                                            </div>\n                                                        )\n                                                    }\n                                                }) \n                                            })\n                                        }\n                                    </div>\n                                    <div>\n                                        {\n                                            props.restaurant.categories.items.filter((category) => {\n                                                return category.id === currentCategory.id\n                                            }).map((category, index) => {\n                                                return category.items.items.map((item, index) => {\n                                                    if (item.hidden) {\n                                                        return (\n                                                            <div key={item.id ? item.id : index}>\n                                                                <img src={item.image}></img>\n                                                                <p>{item.name}</p>\n                                                                <button onClick={() => onDeleteButtonClicked(item)}>delete</button>\n                                                                <button onClick={() => onEditItemButtonClicked(item)}>edit</button>\n                                                                <button onClick={async() => await onRevealButtonClicked(item)}>reveal to menu</button>\n                                                            </div>\n                                                        )\n                                                    }\n                                                }) \n                                            })\n                                        }\n                                    </div>\n                                    {itemAdderOpened && (\n                                        <div>\n                                            <div className={classes.backdrop} onClick={onAddItemCancel} />\n                                            <div className={classes.editorContainer}>\n                                                <p> Add a new Item </p>\n                                                <div>Name: <input type='text' onChange={(e) => {setItemName(e.target.value)}} /></div>\n                                                <div>Description: <input type='text' onChange={(e) => {setItemDescription(e.target.value)}} /></div>\n                                                <div>Ingredients: <input type='text' onChange={(e) => {setItemIngredients(e.target.value)}} /></div>\n                                                <div>price: $<input type='text' onChange={(e) => {setItemPrice(e.target.value)}} /></div>\n                                                <div>Image: <input type='file' onChange={(e) => {setItemImage(e.target.files[0])}} /></div>\n                                                <div>\n                                                    <input type=\"checkbox\" id=\"vege\" onClick={\n                                                        (e) => {setItemSpecilities((prev) => {return {...prev, vege: e.target.checked}})}\n                                                        } />\n                                                    <label for=\"vege\">vegetarian</label>\n                                                </div>\n                                                <div>\n                                                    <input type=\"checkbox\" id=\"vegan\" onClick={\n                                                        (e) => {setItemSpecilities((prev) => {return {...prev, vegan: e.target.checked}})}\n                                                        } />\n                                                    <label for=\"vegan\">vegan</label>\n                                                </div>\n                                                <div>\n                                                    <input type=\"checkbox\" id=\"halal\" onClick={\n                                                        (e) => {setItemSpecilities((prev) => {return {...prev, halal: e.target.checked}})}\n                                                        } />\n                                                    <label for=\"halal\">halal</label>\n                                                </div>\n                                                <div>\n                                                    <input type=\"checkbox\" id=\"featured\" onClick={\n                                                        (e) => {setItemSpecilities((prev) => {return {...prev, featured: e.target.checked}})}\n                                                        } />\n                                                    <label for=\"featured\">featured</label>\n                                                </div>\n                                                <button onClick={onAddItemConfirm}>Save</button>\n                                                <button onClick={onAddItemCancel}>Cancel</button>\n                                            </div>\n                                        </div>\n                                    )}\n                                    <button onClick={AddMenuHandler}>+ Add</button>\n                                </div>\n                            </div>\n                        ) : (\n                            <p>choose category</p>\n                        )\n                    }\n                    </div>\n                </div>\n\n                \n            </div>\n        </div>\n    );\n}\n\nexport default EditMenu;"]},"metadata":{},"sourceType":"module"}